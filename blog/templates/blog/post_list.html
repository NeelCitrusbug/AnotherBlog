{% extends 'blog/base.html'%}

{% block content %}
<div>
    <form class="d-flex my-5" method="get" action="{% url 'post_list' %}">
        <input class="form-control me-2 searchBlog" type="search" placeholder="Search" aria-label="Search" name="query"
            id="query">
        <button class="btn btn-outline-success" type="submit">Search</button>
    </form>
</div>

{% if page_obj %}

{% for post in page_obj %}
<article class="post">
    <aside class="actions">
        {% if user.is_authenticated %}
        <a class="btn btn-primary mx-2" href="{% url 'post_edit' pk=post.pk %}">
            {% include './icons/pencil-fill.svg' %}
        </a>
        <a class="btn btn-danger" href="{% url 'post_remove' pk=post.pk %}">
            Delete
        </a>
        {% endif %}
    </aside>

    <time class="date">
        {{ post.published_date }}
    </time>



    <h2><a href="{% url 'post_detail' pk=post.pk %}">{{ post.title }}</a> ({{ post.get_category_values }})

    </h2>
    <p>{{ post.text|linebreaksbr }}</p>
</article>
{% endfor %}

<div class="pagination">
    <span class="step-links">
        {% if page_obj.has_previous %}
        <a href="?page=1">&laquo; first</a>
        <a href="?page={{ page_obj.previous_page_number }}">previous</a>
        {% endif %}
        <span class="current">
            Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}.
        </span>
        {% if page_obj.has_next %}
        <a href="?page={{ page_obj.next_page_number }}">next</a>
        <a href="?page={{ page_obj.paginator.num_pages }}">last &raquo;</a>
        {% endif %}
    </span>
</div>

{% else %}
<p>No Search results found</p>

Your search : <b>{{ query }}</b> - did not match any document
<br>
Try some other keywords
{% endif %}

{% endblock %}


<!-- pk=page_obj.pk -->